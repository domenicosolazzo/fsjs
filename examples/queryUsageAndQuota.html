<!doctype html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>FileSystem API</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="stylesheet" href="../resources/css/style.css">
  <script src="../resources/js/libs/modernizr-2.0.6.min.js"></script>
  <script src="../lib/fsapi.js"></script>
</head>

<body>

  <div id="container">
    <header>
        <h1>FileSystem API</h1>
    </header>
    <div id="main" role="main">
        <section id="home">

        </section>
        <section id="requestQuota">
            <header>
                <h3>Query Usage and Quota</h3>
            </header>
            <article>
                <h5>
                    Query quota and usage
                </h5>
                <p>
                    <script type="text/javascript">
                        var query = function query(type){
                            var result = fsapi.queryUsageAndQuota(type);
                            setTimeout(function(){
                                $('#type').text(type);
                                $('#quota').text(result.data["quota"]);
                                $('#usage').text(result.data["usage"]);
                                $('#error').text(result.error);
                            },0);
                        }
                    </script>
                    <input type="button" value="Temporary query" onclick="query('TEMPORARY');"/>
                    <input type="button" value="Persistent query" onclick="query('PERSISTENT');"/>

                </p>
                <h6>Result</h6>
                <p>
                    Type : <span id="type"></span><br />
                    Quota: <span id="quota"></span><br />
                    Usage: <span id="usage"></span><br />
                    Error: <span id="error"></span><br />
                </p>
            </article>
            <article>
                <h5>
                    Query quota and usage - Using callbacks
                </h5>
                <p>
                    <script type="text/javascript">
                        var queryCallback = function query(type){
                            $('#typeCallback').text(type);
                            var successCallback = function(opts){
                                $('#quotaCallback').text(result.data["quota"]);
                                $('#usageCallback').text(result.data["usage"]);
                            };
                            var errorCallback = function(opts){
                                $('#errorCallback').text(result.error);
                            };
                            var result = fsapi.queryUsageAndQuota(type, successCallback, errorCallback);
                        }
                    </script>
                    <input type="button" value="Temporary query" onclick="queryCallback('TEMPORARY');"/>
                    <input type="button" value="Persistent query" onclick="queryCallback('PERSISTENT');"/>

                </p>
                <h6>Result</h6>
                <p>
                    Type : <span id="typeCallback"></span><br />
                    Quota: <span id="quotaCallback"></span><br />
                    Usage: <span id="usageCallback"></span><br />
                    Error: <span id="errorCallback"></span><br />
                </p>
            </article>
        </section>
    </div>
    <footer>

    </footer>
  </div>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../resources/js/libs/jquery-1.6.2.min.js"><\/script>')</script>


  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7 ]>
    <script defer src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script defer>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->

</body>
</html>
